

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Additional Research Tools &mdash; Python Empirical Research Workflows 0.1.0 documentation</title>
  

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script >var copybuttonSkipText = '>>> ';</script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Data Management in Python Using Standard Tooling" href="data_management_in_python.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Python Empirical Research Workflows
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples and Workflows</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data_management_in_python.html">Data Management in Python Using Standard Tooling</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Additional Research Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#table-of-contents">Table of Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#some-general-imports">Some General Imports</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pyexlatex"><code class="docutils literal notranslate"><span class="pre">pyexlatex</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#some-clean-up">Some Clean Up</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#regtools"><code class="docutils literal notranslate"><span class="pre">regtools</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#some-setup">Some Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pd-utils"><code class="docutils literal notranslate"><span class="pre">pd-utils</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Some Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tradedays"><code class="docutils literal notranslate"><span class="pre">tradedays</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#left-merge-latest"><code class="docutils literal notranslate"><span class="pre">left_merge_latest</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#averages"><code class="docutils literal notranslate"><span class="pre">averages</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#portfolio"><code class="docutils literal notranslate"><span class="pre">portfolio</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#long-to-wide"><code class="docutils literal notranslate"><span class="pre">long_to_wide</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#winsorize"><code class="docutils literal notranslate"><span class="pre">winsorize</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#formatted-corr-df"><code class="docutils literal notranslate"><span class="pre">formatted_corr_df</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#datacode"><code class="docutils literal notranslate"><span class="pre">datacode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#bibtex-gen"><code class="docutils literal notranslate"><span class="pre">bibtex_gen</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#objcache"><code class="docutils literal notranslate"><span class="pre">objcache</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#some-cleanup">Some Cleanup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pyfileconf"><code class="docutils literal notranslate"><span class="pre">pyfileconf</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python Empirical Research Workflows</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Examples and Workflows</a> &raquo;</li>
        
      <li>Additional Research Tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/auto_examples/additional_research_tools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-additional-research-tools-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p>
</div>
<div class="sphx-glr-example-title section" id="additional-research-tools">
<span id="sphx-glr-auto-examples-additional-research-tools-py"></span><h1>Additional Research Tools<a class="headerlink" href="#additional-research-tools" title="Permalink to this headline">¶</a></h1>
<p>I’ve been using Python actively for research since 2015. One of the
beauties of Python is that it’s very easy to write your own functions,
modules, and packages for workflows you do often. Every time that I hit
something which was pretty difficult in Python, I built a tool for it to
make it easy. The result after these years of doing this is that I’ve
built up a lot of tools that make empirical research in Python easier.
Let’s take a look through them.</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#pyexlatex">**pyexlatex**: Generate LaTeX directly from Python with a simplified
API</a></p></li>
<li><p><a class="reference external" href="#regtools">**regtools**: High-level tools for running
regressions</a></p></li>
<li><p><a class="reference external" href="#pd-utils">**pd-utils**: Additional utilities to work with
Pandas</a></p></li>
<li><p><a class="reference external" href="#datacode">**datacode**: Data pipelines for humans</a></p></li>
<li><p><a class="reference external" href="#bibtex_gen">**bibtex_gen**: Citation management using Mendeley API and
BibTeX</a></p></li>
<li><p><a class="reference external" href="#objcache">**objcache**: Easily store Python objects for later (cache
results)</a></p></li>
<li><p><a class="reference external" href="#pyfileconf">**pyfileconf**: Function and class configuration as Python files,
helpful for managing multiple complex configuations</a></p></li>
</ul>
<div class="section" id="some-general-imports">
<h3>Some General Imports<a class="headerlink" href="#some-general-imports" title="Permalink to this headline">¶</a></h3>
<p>Import some packages we’ll need across the examples.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pyexlatex">
<h2><code class="docutils literal notranslate"><span class="pre">pyexlatex</span></code><a class="headerlink" href="#pyexlatex" title="Permalink to this headline">¶</a></h2>
<p>Generate LaTeX directly from Python with a simplified API.</p>
<p>NOTE: You must have a LaTeX distribution installed on your machine for
this package to work. Tested with MikTeX and TeXLive on Windows and
Linux.</p>
<p>NOTE: It is highly recommended to run this example in Jupyer Lab so that
PDFs will be outputted inline in Jupyter.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/py-ex-latex">the
documentation</a>.</p>
<p>The most basic example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyexlatex</span> <span class="k">as</span> <span class="nn">pl</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="s1">&#39;woo&#39;</span><span class="p">)</span>
<span class="n">doc</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>As a LaTeX str:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>\documentclass[]{article}
\usepackage{amsmath}
\usepackage{pdflscape}
\usepackage{booktabs}
\usepackage{array}
\usepackage{threeparttable}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{textcomp}
\usepackage{dcolumn}
\newcolumntype{L}[1]{&gt;{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{&gt;{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{&gt;{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{.}{D{.}{.}{-1}}
\usepackage[T1]{fontenc}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{graphicx}
\usepackage[margin=0.8in, bottom=1.2in]{geometry}
\usepackage[page]{appendix}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\fancyhead{}
\rfoot{Page \thepage\  of \pageref{LastPage}}
\cfoot{}
\begin{document}
woo
\end{document}
</pre></div>
</div>
<p>Object-oriented API example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">my_value</span></a> <span class="o">=</span> <span class="mi">5</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">contents</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;Some text. My value is </span><span class="si">{my_value}</span><span class="s1">.&#39;</span><span class="p">,</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">UnorderedList</span><span class="p">([</span>
                <span class="s1">&#39;A bullet&#39;</span><span class="p">,</span>
                <span class="s1">&#39;List&#39;</span>
            <span class="p">])</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;First Section&#39;</span>
    <span class="p">)</span>
<span class="p">]</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">contents</span></a><span class="p">)</span>
<span class="n">doc</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Template-driven API example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">template</span></a> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">{</span><span class="si">% f</span><span class="s2">ilter Section(title=&#39;First Section&#39;) %}</span>

<span class="s2">Some text. My value is {{ my_value }}.</span>
<span class="s2">{{ [</span>
<span class="s2">    &#39;A bullet&#39;,</span>
<span class="s2">    &#39;List&#39;</span>
<span class="s2">] | UnorderedList }}</span>

<span class="s2">{</span><span class="si">% e</span><span class="s2">ndfilter %}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">my_value</span></a> <span class="o">=</span> <span class="mi">5</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a> <span class="o">=</span> <span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">MyModel</span></a><span class="p">(</span><span class="n">template_str</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">template</span></a><span class="p">)]</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
<span class="n">doc</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>A combination works as well.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a> <span class="o">=</span> <span class="p">[</span>
    <a href="https://docs.python.org/3/library/functions.html#type" title="View documentation for builtins.type"><span class="n">MyModel</span></a><span class="p">(</span><span class="n">template_str</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">template</span></a><span class="p">),</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="sa">f</span><span class="s1">&#39;Some text. My value is </span><span class="si">{my_value}</span><span class="s1">.&#39;</span><span class="p">,</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">UnorderedList</span><span class="p">([</span>
                <span class="s1">&#39;A bullet&#39;</span><span class="p">,</span>
                <span class="s1">&#39;List&#39;</span>
            <span class="p">])</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Second Section&#39;</span>
    <span class="p">)</span>
<span class="p">]</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
<span class="n">doc</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Equations are fine too.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;You can use inline equations&#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Equation</span><span class="p">(</span><span class="s1">&#39;y = mx + b&#39;</span><span class="p">),</span>
             <span class="s1">&#39;by default, or pass inline=False to separate them&#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Equation</span><span class="p">(</span><span class="s1">&#39;E = MC^2&#39;</span><span class="p">,</span> <span class="n">inline</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Equations Example&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>You can create tables from <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a DataFrame for example</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Stuff&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Thing&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Other Thing&#39;</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_list_of_lists_of_dfs</span><span class="p">([[</span><span class="n">df</span><span class="p">]])</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">([</span><span class="n">table</span><span class="p">])</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Publication-quality multi-panel tables with captions, below text,
consolidation of indices, etc. are supported.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Table</span><span class="o">.</span><span class="n">from_list_of_lists_of_dfs</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="n">df</span><span class="p">,</span> <span class="n">df</span><span class="p">],</span>
        <span class="p">[</span><span class="n">df</span><span class="p">,</span> <span class="n">df</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">include_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">panel_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Top Panel&#39;</span><span class="p">,</span> <span class="s1">&#39;Bottom Panel&#39;</span><span class="p">],</span>
    <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;My First Complex Table&#39;</span><span class="p">,</span>
    <span class="n">below_text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Some description of my table. Isn&#39;t it nice to be able to do everything all in one command?</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;tables:one&#39;</span>
<span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Figures are supported as well, with an integration for <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>
and therefore <code class="docutils literal notranslate"><span class="pre">pandas</span></code> as well (can also be loaded from file).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.SubplotBase.html#matplotlib.axes.SubplotBase" title="View documentation for matplotlib.axes.SubplotBase"><span class="n">ax</span></a> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<a href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="View documentation for matplotlib.figure.Figure"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.get_figure.html#matplotlib.axes.Axes.get_figure" title="View documentation for matplotlib.axes.Axes.get_figure"><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span></a><span class="p">()</span>

<span class="n">pl_fig</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">from_dict_of_names_and_plt_figures</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;My Subfigure&#39;</span><span class="p">:</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="View documentation for matplotlib.figure.Figure"><span class="n">fig</span></a><span class="p">,</span>  <span class="c1"># more subfigures can be passed in the same way</span>
    <span class="p">},</span>
    <span class="s1">&#39;.&#39;</span><span class="p">,</span>  <span class="c1"># output location</span>
    <span class="n">figure_name</span><span class="o">=</span><span class="s1">&#39;My Figure&#39;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;figs:one&#39;</span><span class="p">,</span>
    <span class="n">position_str_name_dict</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;My Subfigure&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;[t]{0.95\linewidth}&#39;</span>  <span class="c1"># LaTeX positioning strings accepted (be sure to use r&#39;&#39; to escape \)</span>
    <span class="p">}</span>
<span class="p">)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pl_fig</span><span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_additional_research_tools_001.png" class="sphx-glr-single-img" src="../_images/sphx_glr_additional_research_tools_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Table/Figure references work just fine and you can use the objects
directly if desired.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;See Table&#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Ref</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">label</span><span class="p">),</span> <span class="s1">&#39;and Figure&#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Ref</span><span class="p">(</span><span class="n">pl_fig</span><span class="o">.</span><span class="n">label</span><span class="p">)]</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Example for Table and Figure References&#39;</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Support for citations as well. There is an easier way to create these
using <code class="docutils literal notranslate"><span class="pre">bibtex_gen</span></code> <a class="reference external" href="#bibtex_gen">as shown in that section</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bibtex_item</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">BibTexArticle</span><span class="p">(</span>
    <span class="s1">&#39;using-pyexlatex&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Nick DeRobertis&#39;</span><span class="p">,</span>
    <span class="s1">&#39;How to Use pyexlatex&#39;</span><span class="p">,</span>
    <span class="s1">&#39;The Journal of Awesome Stuff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;2020&#39;</span><span class="p">,</span>
    <span class="n">volume</span><span class="o">=</span><span class="s1">&#39;Vol 1&#39;</span><span class="p">,</span>
    <span class="n">pages</span><span class="o">=</span><span class="s1">&#39;1-2&#39;</span><span class="p">,</span>
<span class="p">)</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;As shown by&#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">CiteT</span><span class="p">(</span><span class="s1">&#39;using-pyexlatex&#39;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">Monospace</span><span class="p">(</span><span class="s1">&#39;pyexlatex&#39;</span><span class="p">),</span> <span class="s1">&#39;is pretty awesome.&#39;</span><span class="p">]</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Example for Using Citations&#39;</span>
    <span class="p">),</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Bibliography</span><span class="p">([</span><span class="n">bibtex_item</span><span class="p">],</span> <span class="n">style_name</span><span class="o">=</span><span class="s1">&#39;jof&#39;</span><span class="p">)</span>
<span class="p">])</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>Add metadata to the document such as author, title, etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="View documentation for builtins.dict"><span class="n">footnotes</span></a> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;nick&#39;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Footnote</span><span class="p">(</span>
            <span class="s2">&quot;University of Florida, PhD Candidate, Tel: (352)392-4669, Email: Nicholas.DeRobertis@Warrington.ufl.edu&quot;</span>
        <span class="p">),</span>
        <span class="s1">&#39;other&#39;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Footnote</span><span class="p">(</span>
            <span class="s2">&quot;Example University, Professor&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>

<a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">abstract</span></a> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">A short abstract which is included for example purposes. There is a lot of configuration available for how the document</span>
<span class="s2">itself renders. Feel free to take this as an example of something that looks pretty good and then look through the</span>
<span class="s2">documentation for how to modify it.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">content</span></a><span class="p">,</span>
    <span class="n">authors</span><span class="o">=</span><span class="p">[</span>
        <span class="sa">f</span><span class="s1">&#39;{pl.SmallCaps(&quot;Nick DeRobertis&quot;)}</span><span class="si">{footnotes[&quot;nick&quot;]}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;{pl.SmallCaps(&quot;Other Person&quot;)}</span><span class="si">{footnotes[&quot;other&quot;]}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;The title of my paper&#39;</span><span class="p">,</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">abstract</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">abstract</span></a><span class="p">,</span>
    <span class="n">page_modifier_str</span><span class="o">=</span><span class="s1">&#39;margin=1.0in&#39;</span><span class="p">,</span>
    <span class="n">section_numbering_styles</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">section</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\Roman</span><span class="si">{section}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">subsection</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\thesection.\Alph</span><span class="si">{subsection}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">subsubsection</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\thesubsection.\arabic</span><span class="si">{subsubsection}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">subfigure</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\roman</span><span class="si">{subfigure}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">floats_at_end</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">line_spacing</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">tables_relative_font_size</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">page_style</span><span class="o">=</span><span class="s1">&#39;fancyplain&#39;</span><span class="p">,</span>
    <span class="n">custom_headers</span><span class="o">=</span><span class="p">[</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">(</span><span class="s1">&#39;My Short Title&#39;</span><span class="p">),</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">Header</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">SmallCaps</span><span class="p">([</span><span class="s1">&#39;Page &#39;</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">ThisPageNumber</span><span class="p">()]))</span>
    <span class="p">],</span>
    <span class="n">page_numbers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">separate_abstract_page</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">extra_title_page_lines</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">Italics</span><span class="p">(</span><span class="s1">&#39;JEL Classification:&#39;</span><span class="p">),</span> <span class="s1">&#39;E42, E44, E52, G12, G15, [add more here]&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">Italics</span><span class="p">(</span><span class="s1">&#39;Keywords:&#39;</span><span class="p">),</span> <span class="s1">&#39;Thing; stuff; other stuf&#39;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="n">doc</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Document&gt;
</pre></div>
</div>
<p>LaTeX presentations with Beamer are supported as well.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">pres_content</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s1">&#39;Some text&#39;</span><span class="p">,</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s1">&#39;more text&#39;</span>
                <span class="p">],</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Block&#39;</span>
            <span class="p">),</span>
            <span class="n">pl_fig</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">]</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Presentation</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">pres_content</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Item(name=document, contents=\begin{frame}
Some text
\begin{block}{My Block}
more text
\end{block}
\begin{figure}
\includegraphics[width=0.95\linewidth]{Sources/My_Subfigure.pdf}
\caption{My Figure}
\label{figs:one}
\end{figure}
\end{frame})&gt;
</pre></div>
</div>
<p>And with sections, metadata, frame templates, etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pl_fig</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">pres_content</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">DimRevealListFrame</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s1">&#39;some&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;bullet&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;points&#39;</span>
                <span class="p">],</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;First Frame&#39;</span>
            <span class="p">),</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;First Section&#39;</span>
    <span class="p">),</span>
    <span class="n">pl</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span>
                <span class="n">pl_fig</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Second Frame&#39;</span>
            <span class="p">),</span>
        <span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Second Section&#39;</span>
    <span class="p">)</span>

<span class="p">]</span>
<span class="n">pl</span><span class="o">.</span><span class="n">Presentation</span><span class="p">(</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">pres_content</span></a><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Presentation&#39;</span><span class="p">,</span>
    <span class="n">authors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Nick DeRobertis&#39;</span><span class="p">,</span> <span class="s1">&#39;Some Person&#39;</span><span class="p">],</span>
    <span class="n">short_title</span><span class="o">=</span><span class="s1">&#39;Pres&#39;</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;An Example Presentation&#39;</span><span class="p">,</span>
    <span class="n">short_author</span><span class="o">=</span><span class="s1">&#39;ND&#39;</span><span class="p">,</span>
    <span class="n">institutions</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;University of Florida&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;University of Florida&#39;</span><span class="p">,</span> <span class="s1">&#39;Some other Place&#39;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">short_institution</span><span class="o">=</span><span class="s1">&#39;UF&#39;</span><span class="p">,</span>
    <span class="n">nav_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">toc_sections</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Item(name=document, contents=\title[Pres]{My Presentation}
\subtitle{An Example Presentation}
\author[ND]{Nick DeRobertis\inst{1}, Some Person\inst{2}}
\date{\today}
\begin{frame}
\titlepage
\label{title-frame}
\end{frame}
\begin{section}{First Section}
\begin{frame}
\frametitle{First Frame}
\begin{itemize}
\item&lt;+-&gt; \textcolor&lt;.(1)-&gt;{black!30}{some}
\vfill
\item&lt;+-&gt; \textcolor&lt;.(1)-&gt;{black!30}{bullet}
\vfill
\item&lt;+-&gt; points
\end{itemize}
\end{frame}
\end{section}
\begin{section}{Second Section}
\begin{frame}
\frametitle{Second Frame}
\begin{figure}
\includegraphics[width=0.95\linewidth]{Sources/My_Subfigure.pdf}
\caption{My Figure}
\label{figs:one}
\end{figure}
\end{frame}
\end{section})&gt;
</pre></div>
</div>
<p>By default it produces the “slides” version that you would use while
presenting. It can also produce a “handouts” version which removes all
the effects (overlays).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pl</span><span class="o">.</span><span class="n">Presentation</span><span class="p">(</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">pres_content</span></a><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Presentation&#39;</span><span class="p">,</span>
    <span class="n">authors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Nick DeRobertis&#39;</span><span class="p">,</span> <span class="s1">&#39;Some Person&#39;</span><span class="p">],</span>
    <span class="n">short_title</span><span class="o">=</span><span class="s1">&#39;Pres&#39;</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;An Example Presentation&#39;</span><span class="p">,</span>
    <span class="n">short_author</span><span class="o">=</span><span class="s1">&#39;ND&#39;</span><span class="p">,</span>
    <span class="n">institutions</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;University of Florida&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;University of Florida&#39;</span><span class="p">,</span> <span class="s1">&#39;Some other Place&#39;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">short_institution</span><span class="o">=</span><span class="s1">&#39;UF&#39;</span><span class="p">,</span>
    <span class="n">nav_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">toc_sections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">handouts</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># add this to remove presentation effects, good for distributing the PDF</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Item(name=document, contents=\title[Pres]{My Presentation}
\subtitle{An Example Presentation}
\author[ND]{Nick DeRobertis\inst{1}, Some Person\inst{2}}
\date{\today}
\begin{frame}
\titlepage
\label{title-frame}
\end{frame}
\begin{section}{First Section}
\begin{frame}
\frametitle{First Frame}
\begin{itemize}
\item some
\vfill
\item bullet
\vfill
\item points
\end{itemize}
\end{frame}
\end{section}
\begin{section}{Second Section}
\begin{frame}
\frametitle{Second Frame}
\begin{figure}
\includegraphics[width=0.95\linewidth]{Sources/My_Subfigure.pdf}
\caption{My Figure}
\label{figs:one}
\end{figure}
\end{frame}
\end{section})&gt;
</pre></div>
</div>
<div class="section" id="some-clean-up">
<h3>Some Clean Up<a class="headerlink" href="#some-clean-up" title="Permalink to this headline">¶</a></h3>
<p>Not important, just cleaning up temporary files from the example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">temp_files</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;My Subfigure.pdf&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">for</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">file</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">temp_files</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/os.html#os.remove" title="View documentation for os.remove"><span class="n">os</span><span class="o">.</span><span class="n">remove</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">file</span></a><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="regtools">
<h2><code class="docutils literal notranslate"><span class="pre">regtools</span></code><a class="headerlink" href="#regtools" title="Permalink to this headline">¶</a></h2>
<p>High-level tools for running regressions.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/regtools">the
documentation</a>.</p>
<div class="section" id="some-setup">
<h3>Some Setup<a class="headerlink" href="#some-setup" title="Permalink to this headline">¶</a></h3>
<p>Create a DataFrame with Y and X variables and a known relationship
between them. Also fill some cells with missing values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;$\epsilon$&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;X2&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;X3&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;$\epsilon$&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;f1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,))</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;f2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,))</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="s1">&#39;1/2/2000&#39;</span><span class="p">,</span> <span class="s1">&#39;1/3/2000&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,)))</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>X1</th>
      <th>X2</th>
      <th>X3</th>
      <th>$\epsilon$</th>
      <th>Y</th>
      <th>f1</th>
      <th>f2</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.771718</td>
      <td>0.476823</td>
      <td>0.962356</td>
      <td>0.241354</td>
      <td>30.287488</td>
      <td>c</td>
      <td>e</td>
      <td>2000-01-03</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.399456</td>
      <td>0.627217</td>
      <td>NaN</td>
      <td>0.698204</td>
      <td>21.805586</td>
      <td>a</td>
      <td>d</td>
      <td>2000-01-03</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.588090</td>
      <td>0.286225</td>
      <td>0.428048</td>
      <td>0.529080</td>
      <td>19.654473</td>
      <td>c</td>
      <td>e</td>
      <td>2000-01-01</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.254936</td>
      <td>0.630017</td>
      <td>0.526415</td>
      <td>0.452638</td>
      <td>NaN</td>
      <td>b</td>
      <td>e</td>
      <td>2000-01-03</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.414683</td>
      <td>0.438721</td>
      <td>0.697546</td>
      <td>0.809505</td>
      <td>28.506585</td>
      <td>a</td>
      <td>e</td>
      <td>2000-01-02</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /><p>All regression automatically drop values with missing rows. By default
they run with heteroskedasticity-robust standard errors and a constant.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">regtools</span>

<a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">result</span></a> <span class="o">=</span> <span class="n">regtools</span><span class="o">.</span><span class="n">reg</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">]</span>
<span class="p">)</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">result</span></a><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>            <td>Y</td>        <th>  R-squared:         </th> <td>   0.835</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.830</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   151.4</td>
</tr>
<tr>
  <th>Date:</th>             <td>Wed, 19 Feb 2020</td> <th>  Prob (F-statistic):</th> <td>7.17e-36</td>
</tr>
<tr>
  <th>Time:</th>                 <td>14:51:56</td>     <th>  Log-Likelihood:    </th> <td> -237.32</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>    98</td>      <th>  AIC:               </th> <td>   482.6</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>    94</td>      <th>  BIC:               </th> <td>   493.0</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>         <td>HC1</td>       <th>                     </th>     <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
    <td></td>       <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>const</th> <td>    4.8628</td> <td>    1.032</td> <td>    4.712</td> <td> 0.000</td> <td>    2.840</td> <td>    6.885</td>
</tr>
<tr>
  <th>X1</th>    <td>    5.7310</td> <td>    0.975</td> <td>    5.880</td> <td> 0.000</td> <td>    3.821</td> <td>    7.641</td>
</tr>
<tr>
  <th>X2</th>    <td>   10.1256</td> <td>    0.999</td> <td>   10.135</td> <td> 0.000</td> <td>    8.167</td> <td>   12.084</td>
</tr>
<tr>
  <th>X3</th>    <td>   19.2451</td> <td>    1.007</td> <td>   19.115</td> <td> 0.000</td> <td>   17.272</td> <td>   21.218</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>22.971</td> <th>  Durbin-Watson:     </th> <td>   1.751</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>   5.269</td>
</tr>
<tr>
  <th>Skew:</th>          <td>-0.093</td> <th>  Prob(JB):          </th> <td>  0.0718</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 1.879</td> <th>  Cond. No.          </th> <td>    6.76</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Standard Errors are heteroscedasticity robust (HC1)
<br />
<br /><p>Run multiple regressions in one go with iteration tools. All functions
also support fixed effects and multiway clustering.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">reg_list</span></a><span class="p">,</span> <span class="n">summ</span> <span class="o">=</span> <span class="n">regtools</span><span class="o">.</span><span class="n">reg_for_each_xvar_set_and_produce_summary</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">fe</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span> <span class="s1">&#39;f2&#39;</span><span class="p">]],</span>
    <span class="n">entity_var</span><span class="o">=</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span>
    <span class="n">time_var</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span>
    <span class="n">cluster</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span> <span class="s1">&#39;f2&#39;</span><span class="p">],</span>
    <span class="n">robust</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">summ</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/linearmodels/panel/results.py:85: RuntimeWarning: invalid value encountered in sqrt
  return Series(np.sqrt(np.diag(self.cov)), self._var_names, name=&quot;std_error&quot;)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/scipy/stats/_distn_infrastructure.py:903: RuntimeWarning: invalid value encountered in greater
  return (a &lt; x) &amp; (x &lt; b)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/scipy/stats/_distn_infrastructure.py:903: RuntimeWarning: invalid value encountered in less
  return (a &lt; x) &amp; (x &lt; b)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/scipy/stats/_distn_infrastructure.py:1827: RuntimeWarning: invalid value encountered in greater_equal
  cond2 = (x &gt;= np.asarray(_b)) &amp; cond0
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/tstat.py:17: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;type&#39;] = [&#39;estimate&#39;, &#39;stderr&#39;] * int(len(df.index) / 2)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/tstat.py:20: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;regressor&#39;] = [i for sublist in [[j] * 2 for j in df.index[0::2]] for i in sublist]
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/pandas/core/indexing.py:670: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  self._setitem_with_indexer(indexer, value)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/tstat.py:31: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  ] = t_values
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/pandas/core/frame.py:3997: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  errors=errors,
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/__init__.py:170: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;type&#39;] = [&#39;estimate&#39;, &#39;stderr&#39;] * int(len(df.index) / 2)
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/__init__.py:173: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;regressor&#39;] = [i for sublist in [[j] * 2 for j in df.index[0::2]] for i in sublist]
/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/regtools/summarize/__init__.py:177: SettingWithCopyWarning:
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;idx&#39;] = [i for i in range(len(df))]
</pre></div>
</div>
<table class="simpletable">
<tr>
          <td></td>            <th>Y I</th>     <th>Y II</th>     <th>Y III</th>   <th>Y IIII</th>
</tr>
<tr>
  <th>R-squared</th>           <td>nan</td>      <td>nan</td>      <td>nan</td>      <td>nan</td>
</tr>
<tr>
  <th></th>                     <td></td>         <td></td>         <td></td>         <td></td>
</tr>
<tr>
  <th>X1</th>                 <td>2.86</td>    <td>2.59***</td>  <td>6.06***</td>   <td>5.76</td>
</tr>
<tr>
  <th></th>                  <td>(1.50)</td>   <td>(3.10)</td>   <td>(7.04)</td>      <td></td>
</tr>
<tr>
  <th>X2</th>                   <td></td>     <td>10.28***</td>     <td></td>     <td>10.04***</td>
</tr>
<tr>
  <th></th>                     <td></td>      <td>(3.91)</td>      <td></td>      <td>(26.23)</td>
</tr>
<tr>
  <th>X3</th>                   <td></td>         <td></td>     <td>19.17***</td> <td>19.05***</td>
</tr>
<tr>
  <th></th>                     <td></td>         <td></td>      <td>(14.91)</td>  <td>(28.25)</td>
</tr>
<tr>
  <th>Intercept</th>        <td>20.92***</td> <td>15.58***</td>   <td>10.13</td>   <td>4.99***</td>
</tr>
<tr>
  <th></th>                  <td>(23.15)</td>  <td>(9.00)</td>      <td></td>      <td>(8.19)</td>
</tr>
<tr>
  <th>f1 Fixed Effects</th>    <td>Yes</td>      <td>Yes</td>      <td>Yes</td>      <td>Yes</td>
</tr>
<tr>
  <th>f2 Fixed Effects</th>    <td>Yes</td>      <td>Yes</td>      <td>Yes</td>      <td>Yes</td>
</tr>
<tr>
  <th>Cluster by f1</th>       <td>Yes</td>      <td>Yes</td>      <td>Yes</td>      <td>Yes</td>
</tr>
<tr>
  <th>Cluster by f2</th>       <td>Yes</td>      <td>Yes</td>      <td>Yes</td>      <td>Yes</td>
</tr>
<tr>
  <th>N</th>                   <td>99</td>       <td>99</td>       <td>98</td>       <td>98</td>
</tr>
</table>
<br />
<br /><p>Default is OLS. Other supported types: Probit, Logit, Quantile,
Fama-Macbeth. Just pass the string to <code class="docutils literal notranslate"><span class="pre">reg_type</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">reg_list</span></a><span class="p">,</span> <span class="n">summ</span> <span class="o">=</span> <span class="n">regtools</span><span class="o">.</span><span class="n">reg_for_each_xvar_set_and_produce_summary</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">reg_type</span><span class="o">=</span><span class="s1">&#39;quantile&#39;</span><span class="p">,</span>
    <span class="n">q</span><span class="o">=</span><span class="mf">0.9</span>
<span class="p">)</span>
<span class="n">summ</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">reg_list</span></a><span class="p">,</span> <span class="n">summ</span> <span class="o">=</span> <span class="n">regtools</span><span class="o">.</span><span class="n">reg_for_each_xvar_set_and_produce_summary</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s1">&#39;Y&#39;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">]</span>
    <span class="p">],</span>
    <span class="n">reg_type</span><span class="o">=</span><span class="s1">&#39;fama-macbeth&#39;</span><span class="p">,</span>
    <span class="n">entity_var</span><span class="o">=</span><span class="s1">&#39;f1&#39;</span><span class="p">,</span>
    <span class="n">time_var</span><span class="o">=</span><span class="s1">&#39;date&#39;</span>
<span class="p">)</span>
<span class="n">summ</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/runner/.local/share/virtualenvs/py-research-workflows-rjN0B_bW/lib/python3.7/site-packages/linearmodels/panel/model.py:2631: InferenceUnavailableWarning: The number of time-series observation available to estimate cross-sectional
regressions, 3, is less than the number of parameters in the model. Parameter
inference is not available.
  InferenceUnavailableWarning,
</pre></div>
</div>
<table class="simpletable">
<tr>
      <td></td>         <th>Y I</th>     <th>Y II</th>     <th>Y III</th>   <th>Y IIII</th>
</tr>
<tr>
  <th>R-squared</th>    <td>nan</td>      <td>nan</td>      <td>nan</td>      <td>nan</td>
</tr>
<tr>
  <th></th>              <td></td>         <td></td>         <td></td>         <td></td>
</tr>
<tr>
  <th>X1</th>          <td>3.34</td>     <td>3.59</td>    <td>6.02***</td>  <td>5.60***</td>
</tr>
<tr>
  <th></th>           <td>(0.96)</td>   <td>(1.38)</td>   <td>(3.23)</td>   <td>(11.05)</td>
</tr>
<tr>
  <th>X2</th>            <td></td>      <td>9.83***</td>     <td></td>     <td>10.42***</td>
</tr>
<tr>
  <th></th>              <td></td>      <td>(6.24)</td>      <td></td>      <td>(28.28)</td>
</tr>
<tr>
  <th>X3</th>            <td></td>         <td></td>     <td>19.25***</td> <td>19.36***</td>
</tr>
<tr>
  <th></th>              <td></td>         <td></td>      <td>(77.49)</td>  <td>(15.32)</td>
</tr>
<tr>
  <th>Intercept</th> <td>20.70***</td> <td>15.30***</td> <td>10.14***</td>  <td>4.70***</td>
</tr>
<tr>
  <th></th>           <td>(12.50)</td>  <td>(10.53)</td>  <td>(9.18)</td>   <td>(4.48)</td>
</tr>
<tr>
  <th>N</th>            <td>99</td>       <td>99</td>       <td>98</td>       <td>98</td>
</tr>
</table>
<br />
<br /></div>
</div>
<div class="section" id="pd-utils">
<h2><code class="docutils literal notranslate"><span class="pre">pd-utils</span></code><a class="headerlink" href="#pd-utils" title="Permalink to this headline">¶</a></h2>
<p>Additional utilities to work with Pandas.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/pd-utils">the
documentation</a>.</p>
<div class="section" id="id1">
<h3>Some Setup<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;001076&quot;</span><span class="p">,</span> <span class="s2">&quot;3/1/1995&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001076&quot;</span><span class="p">,</span> <span class="s2">&quot;4/1/1995&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2012&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <span class="s2">&quot;7/1/2012&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a><span class="p">),</span>
        <span class="p">(</span><a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a><span class="p">,</span> <span class="s2">&quot;1/1/2012&quot;</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GVKEY&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">df1</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df1</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">])</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;001076&quot;</span><span class="p">,</span> <span class="s2">&quot;2/1/1995&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001076&quot;</span><span class="p">,</span> <span class="s2">&quot;3/2/1995&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <span class="s2">&quot;11/1/2011&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <span class="s2">&quot;10/1/2011&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;001722&quot;</span><span class="p">,</span> <a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a><span class="p">),</span>
        <span class="p">(</span><a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.nan" title="View documentation for numpy.nan"><span class="n">nan</span></a><span class="p">,</span> <span class="s2">&quot;1/1/2012&quot;</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GVKEY&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">df2</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">])</span>

<span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2000&quot;</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/2/2000&quot;</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/3/2000&quot;</span><span class="p">,</span> <span class="mf">1.03</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/4/2000&quot;</span><span class="p">,</span> <span class="mf">1.04</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2000&quot;</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;1/2/2000&quot;</span><span class="p">,</span> <span class="mf">1.06</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;1/3/2000&quot;</span><span class="p">,</span> <span class="mf">1.07</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10516</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;1/4/2000&quot;</span><span class="p">,</span> <span class="mf">1.08</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10517</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2000&quot;</span><span class="p">,</span> <span class="mf">1.09</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10517</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/2/2000&quot;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10517</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/3/2000&quot;</span><span class="p">,</span> <span class="mf">1.11</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10517</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;1/4/2000&quot;</span><span class="p">,</span> <span class="mf">1.12</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PERMNO&quot;</span><span class="p">,</span> <span class="s2">&quot;byvar&quot;</span><span class="p">,</span> <span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;RET&quot;</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">df1</span>

<span class="n">df2</span>

<span class="n">df3</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>byvar</th>
      <th>Date</th>
      <th>RET</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10516</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.01</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10516</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.02</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10516</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.03</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10516</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.04</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10516</td>
      <td>b</td>
      <td>1/1/2000</td>
      <td>1.05</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>10516</td>
      <td>b</td>
      <td>1/2/2000</td>
      <td>1.06</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>10516</td>
      <td>b</td>
      <td>1/3/2000</td>
      <td>1.07</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>10516</td>
      <td>b</td>
      <td>1/4/2000</td>
      <td>1.08</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10517</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.09</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10517</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.10</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10517</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.11</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10517</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.12</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="tradedays">
<h3><code class="docutils literal notranslate"><span class="pre">tradedays</span></code><a class="headerlink" href="#tradedays" title="Permalink to this headline">¶</a></h3>
<p>Work directly with US market trading days.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pd_utils</span>

<span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span>
    <span class="n">start</span><span class="o">=</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span>
    <span class="n">end</span><span class="o">=</span><span class="s1">&#39;1/31/2000&#39;</span><span class="p">,</span>
    <span class="n">freq</span><span class="o">=</span><span class="n">pd_utils</span><span class="o">.</span><span class="n">tradedays</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2000-01-03&#39;, &#39;2000-01-04&#39;, &#39;2000-01-05&#39;, &#39;2000-01-06&#39;,
               &#39;2000-01-07&#39;, &#39;2000-01-10&#39;, &#39;2000-01-11&#39;, &#39;2000-01-12&#39;,
               &#39;2000-01-13&#39;, &#39;2000-01-14&#39;, &#39;2000-01-18&#39;, &#39;2000-01-19&#39;,
               &#39;2000-01-20&#39;, &#39;2000-01-21&#39;, &#39;2000-01-24&#39;, &#39;2000-01-25&#39;,
               &#39;2000-01-26&#39;, &#39;2000-01-27&#39;, &#39;2000-01-28&#39;, &#39;2000-01-31&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;C&#39;)
</pre></div>
</div>
</div>
<div class="section" id="left-merge-latest">
<h3><code class="docutils literal notranslate"><span class="pre">left_merge_latest</span></code><a class="headerlink" href="#left-merge-latest" title="Permalink to this headline">¶</a></h3>
<p>Merge the latest data available in the right <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to the left
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">left_merge_latest</span><span class="p">(</span>
    <span class="n">df1</span><span class="p">,</span>
    <span class="n">df2</span><span class="p">,</span>
    <span class="n">on</span><span class="o">=</span><span class="s1">&#39;GVKEY&#39;</span><span class="p">,</span>
    <span class="n">max_offset</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
<span class="c1">#     max_offset=pd_utils.tradedays() * 20</span>
<span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GVKEY</th>
      <th>Date</th>
      <th>Date_y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>001076</td>
      <td>1995-03-01</td>
      <td>1995-02-01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>001076</td>
      <td>1995-04-01</td>
      <td>1995-03-02</td>
    </tr>
    <tr>
      <th>2</th>
      <td>001722</td>
      <td>2012-01-01</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>3</th>
      <td>001722</td>
      <td>2012-07-01</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>4</th>
      <td>001722</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>2012-01-01</td>
      <td>NaT</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="averages">
<h3><code class="docutils literal notranslate"><span class="pre">averages</span></code><a class="headerlink" href="#averages" title="Permalink to this headline">¶</a></h3>
<p>Equal and value-weighted averages, optionally by groups</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">averages</span><span class="p">(</span>
    <span class="n">df3</span><span class="p">,</span>
    <span class="s1">&#39;RET&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;PERMNO&#39;</span><span class="p">,</span> <span class="s1">&#39;byvar&#39;</span><span class="p">],</span>
    <span class="n">wtvar</span><span class="o">=</span><span class="s1">&#39;weight&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>byvar</th>
      <th>RET</th>
      <th>RET_wavg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10516</td>
      <td>a</td>
      <td>1.025</td>
      <td>1.025</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10516</td>
      <td>b</td>
      <td>1.065</td>
      <td>1.065</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10517</td>
      <td>a</td>
      <td>1.105</td>
      <td>1.120</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="portfolio">
<h3><code class="docutils literal notranslate"><span class="pre">portfolio</span></code><a class="headerlink" href="#portfolio" title="Permalink to this headline">¶</a></h3>
<p>Form porfolios from some numeric column.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">portfolio</span><span class="p">(</span>
    <span class="n">df3</span><span class="p">,</span>
    <span class="s1">&#39;RET&#39;</span><span class="p">,</span>
    <span class="n">ngroups</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="c1">#     cutoffs=[1.02, 1.07],</span>
<span class="c1">#     quant_cutoffs=[0.2],</span>
    <span class="n">byvars</span><span class="o">=</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>byvar</th>
      <th>Date</th>
      <th>RET</th>
      <th>weight</th>
      <th>portfolio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10516</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.01</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10516</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.02</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10516</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.03</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10516</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.04</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10516</td>
      <td>b</td>
      <td>1/1/2000</td>
      <td>1.05</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>10516</td>
      <td>b</td>
      <td>1/2/2000</td>
      <td>1.06</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6</th>
      <td>10516</td>
      <td>b</td>
      <td>1/3/2000</td>
      <td>1.07</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>7</th>
      <td>10516</td>
      <td>b</td>
      <td>1/4/2000</td>
      <td>1.08</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10517</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.09</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10517</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.10</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10517</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.11</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10517</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.12</td>
      <td>1</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="long-to-wide">
<h3><code class="docutils literal notranslate"><span class="pre">long_to_wide</span></code><a class="headerlink" href="#long-to-wide" title="Permalink to this headline">¶</a></h3>
<p>Pandas has a built in <code class="docutils literal notranslate"><span class="pre">wide_to_long</span></code> function but not
<code class="docutils literal notranslate"><span class="pre">long_to_wide</span></code>. There is <code class="docutils literal notranslate"><span class="pre">.pivot</span></code> but it can’t handle multiple by
variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">long_to_wide</span><span class="p">(</span>
    <span class="n">df3</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;PERMNO&quot;</span><span class="p">,</span> <span class="s2">&quot;byvar&quot;</span><span class="p">],</span>
    <span class="s2">&quot;RET&quot;</span><span class="p">,</span>
    <span class="n">colindex</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">colindex_only</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>byvar</th>
      <th>weight</th>
      <th>1/1/2000</th>
      <th>1/2/2000</th>
      <th>1/3/2000</th>
      <th>1/4/2000</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10516</td>
      <td>a</td>
      <td>0</td>
      <td>1.01</td>
      <td>1.02</td>
      <td>1.03</td>
      <td>1.04</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10516</td>
      <td>a</td>
      <td>1</td>
      <td>1.01</td>
      <td>1.02</td>
      <td>1.03</td>
      <td>1.04</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10516</td>
      <td>b</td>
      <td>1</td>
      <td>1.05</td>
      <td>1.06</td>
      <td>1.07</td>
      <td>1.08</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10517</td>
      <td>a</td>
      <td>0</td>
      <td>1.09</td>
      <td>1.10</td>
      <td>1.11</td>
      <td>1.12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10517</td>
      <td>a</td>
      <td>1</td>
      <td>1.09</td>
      <td>1.10</td>
      <td>1.11</td>
      <td>1.12</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="winsorize">
<h3><code class="docutils literal notranslate"><span class="pre">winsorize</span></code><a class="headerlink" href="#winsorize" title="Permalink to this headline">¶</a></h3>
<p>Winsorize data, optionally by groups, optionally a subset of columns,
and optionally only to top or bottom.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">winsorize</span><span class="p">(</span>
    <span class="n">df3</span><span class="p">,</span>
    <span class="mf">0.4</span><span class="p">,</span>
    <span class="n">subset</span><span class="o">=</span><span class="s2">&quot;RET&quot;</span><span class="p">,</span>
    <span class="n">byvars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PERMNO&quot;</span><span class="p">,</span> <span class="s2">&quot;byvar&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>byvar</th>
      <th>Date</th>
      <th>RET</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10516</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.022624</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10516</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.022624</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10516</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.026720</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10516</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.026720</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10516</td>
      <td>b</td>
      <td>1/1/2000</td>
      <td>1.062624</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>10516</td>
      <td>b</td>
      <td>1/2/2000</td>
      <td>1.062624</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>10516</td>
      <td>b</td>
      <td>1/3/2000</td>
      <td>1.066720</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>10516</td>
      <td>b</td>
      <td>1/4/2000</td>
      <td>1.066720</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10517</td>
      <td>a</td>
      <td>1/1/2000</td>
      <td>1.102624</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10517</td>
      <td>a</td>
      <td>1/2/2000</td>
      <td>1.102624</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10517</td>
      <td>a</td>
      <td>1/3/2000</td>
      <td>1.106720</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10517</td>
      <td>a</td>
      <td>1/4/2000</td>
      <td>1.106720</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
<div class="section" id="formatted-corr-df">
<h3><code class="docutils literal notranslate"><span class="pre">formatted_corr_df</span></code><a class="headerlink" href="#formatted-corr-df" title="Permalink to this headline">¶</a></h3>
<p>Nicely formatted correlations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd_utils</span><span class="o">.</span><span class="n">formatted_corr_df</span><span class="p">(</span><span class="n">df3</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERMNO</th>
      <th>RET</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>PERMNO</th>
      <td>1.00</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>RET</th>
      <td>0.82</td>
      <td>1.00</td>
      <td></td>
    </tr>
    <tr>
      <th>weight</th>
      <td>-0.48</td>
      <td>-0.12</td>
      <td>1.00</td>
    </tr>
  </tbody>
</table>
</div>
<br />
<br /></div>
</div>
<div class="section" id="datacode">
<h2><code class="docutils literal notranslate"><span class="pre">datacode</span></code><a class="headerlink" href="#datacode" title="Permalink to this headline">¶</a></h2>
<p>Data pipelines for humans.</p>
<p>NOTE: Under active development. API is experimental and subject to
change.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/data-code">the
documentation</a>.</p>
<p>Features:</p>
<ul class="simple">
<li><p>Deal with the concept of variables rather than columns in a DataFrame</p></li>
<li><p>Apply transformations to variables to update both the values and name
of the variable, but still be able to say it’s the same variable</p>
<ul>
<li><p>E.g. take lag of variable “A”, now it is shown as
A<span class="math notranslate nohighlight">\(_{t - 1}\)</span> but you can still work with it as the same
variable without parsing the name</p></li>
</ul>
</li>
<li><p>Access variables by <code class="docutils literal notranslate"><span class="pre">short_keys</span></code> and tab-completion but have them
displayed with the label in the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p></li>
<li><p>Associate symbols and descriptions with variables. Generates symbols
by default and you can override.</p></li>
<li><p>Attach data pipelines to generated data sources. It checks when the
original sources were last modified, and if they were more recently
modified than the pipeline was run, will run the pipeline again
automatically.</p></li>
<li><p>Easier merges with data merge pipelines and smart merge options</p></li>
<li><p>Everything is extendible so you can add your own custom logic</p></li>
<li><p>Describe your data sources in detail to enable some features:</p>
<ul>
<li><p>Built-in transformations are index-aware. E.g. you have described
that rows are indexed by firm and time. When you take a lag of the
variable, it will automatically realize it should take the lag
across the time dimension and within the firm</p></li>
<li><p>(Planned feature): Tell it what variables you want, and it will
figure out the merges to make it happen</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO [#1]: add examples for datacode</span>
</pre></div>
</div>
</div>
<div class="section" id="bibtex-gen">
<h2><code class="docutils literal notranslate"><span class="pre">bibtex_gen</span></code><a class="headerlink" href="#bibtex-gen" title="Permalink to this headline">¶</a></h2>
<p>Citation management using Mendeley API and BibTeX.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/bibtex-gen">the
documentation</a>.</p>
</div>
<div class="section" id="objcache">
<h2><code class="docutils literal notranslate"><span class="pre">objcache</span></code><a class="headerlink" href="#objcache" title="Permalink to this headline">¶</a></h2>
<p>Easily store Python objects for later (cache results).</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/obj-cache">the
documentation</a>.</p>
<p>I use this in my workflow so that I can run analysis and store tables
and figures with little effort, then later when I generate the paper I
retrieve the tables and figures from the cache. That way I can update
everything by running the analysis then generating the paper, or I can
update just the text in the paper and generate it quickly using the
pre-existing tables and figures.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">objcache</span> <span class="kn">import</span> <span class="n">ObjectCache</span>

<span class="n">cache</span> <span class="o">=</span> <span class="n">ObjectCache</span><span class="p">(</span><span class="s1">&#39;cache.zodb&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>
<span class="n">cache</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Later session</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">ObjectCache</span><span class="p">(</span><span class="s1">&#39;cache.zodb&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">result</span></a> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><a href="https://docs.python.org/3/library/functions.html#int" title="View documentation for builtins.int"><span class="n">result</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
<div class="section" id="some-cleanup">
<h3>Some Cleanup<a class="headerlink" href="#some-cleanup" title="Permalink to this headline">¶</a></h3>
<p>Not important, just to clean up files generated from the example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">temp_files</span></a> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;cache.zodb&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cache.zodb.index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cache.zodb.lock&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cache.zodb.tmp&#39;</span>
<span class="p">]</span>

<span class="k">for</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">file</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="View documentation for builtins.list"><span class="n">temp_files</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/os.html#os.remove" title="View documentation for os.remove"><span class="n">os</span><span class="o">.</span><span class="n">remove</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="View documentation for builtins.str"><span class="n">file</span></a><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pyfileconf">
<h2><code class="docutils literal notranslate"><span class="pre">pyfileconf</span></code><a class="headerlink" href="#pyfileconf" title="Permalink to this headline">¶</a></h2>
<p>Function and class configuration as Python files, helpful for managing
multiple complex configuations.</p>
<p>NOTE: Under active development. API is experimental and subject to
change.</p>
<p>Find more at <a class="reference external" href="https://nickderobertis.github.io/py-file-conf">the
documentation</a>.</p>
<p>Features:</p>
<ul class="simple">
<li><p>Easy way to have multiple configurations for a single function or
class</p></li>
<li><p>Generates Python file templates for configuration, complete with all
the arguments, type annotations, and default values of function or
class</p></li>
<li><p>Run/get configured functions/classes from Python or the command line</p></li>
<li><p>Update configurations at run-time in a Python script</p>
<ul>
<li><p>Easy to do config-based scripting. E.g.: Run the whole analysis
with 3, 4, and 5 portfolios.</p></li>
</ul>
</li>
<li><p>Works very well with <code class="docutils literal notranslate"><span class="pre">datacode</span></code> where you need to have many
variables, sources, etc. configured</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO [#2]: add examples for pyfileconf</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  3.194 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-additional-research-tools-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/nickderobertis/py-research-workflows/gh-pages?urlpath=lab/tree/notebooks/auto_examples/additional_research_tools.ipynb"><img alt="https://mybinder.org/badge_logo.svg" src="https://mybinder.org/badge_logo.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/27aa9fc418c1889fbf6b7ec3fc83d2e4/additional_research_tools.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">additional_research_tools.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/1541297519ea6a024d18c128a9bc8c9b/additional_research_tools.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">additional_research_tools.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="data_management_in_python.html" class="btn btn-neutral float-left" title="Data Management in Python Using Standard Tooling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Nick DeRobertis

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-158687321-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>